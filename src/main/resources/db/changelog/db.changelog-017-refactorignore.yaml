databaseChangeLog:
  - changeSet:
      id: 17
      author: jason
      changes:
        # This is to update the ignore_file table to remove the auto increment on the id,
        # the id will now be generated from the file_system_object table

        - renameColumn:
            oldColumnName: id
            newColumnName: oldId
            tableName: ignore_file
            columnDataType: int

        - addColumn:
            columns:
              - column:
                  name: id
                  type: int
            tableName: ignore_file

        - sql:
            sql: |
              update ignore_file set id = oldId;

        - dropPrimaryKey:
            tableName: ignore_file

        - addNotNullConstraint:
            columnDataType: int
            columnName: id
            tableName: ignore_file

        - addPrimaryKey:
            columnNames: id
            constraintName:
            tableName: ignore_file

        - dropColumn:
            columnName: oldId
            tableName: ignore_file

        - dropColumn:
            columnName: name
            tableName: ignore_file

        - dropColumn:
            columnName: size
            tableName: ignore_file

        - dropColumn:
            columnName: date
            tableName: ignore_file

        - dropColumn:
            columnName: md5
            tableName: ignore_file

        # Need to copy from ignored_file to the file table & the fso table.
